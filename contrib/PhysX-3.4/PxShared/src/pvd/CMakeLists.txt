ADD_DEFINITIONS(-DPX_PVDSDK_DLL=1)
ADD_DEFINITIONS(-DPX_FOUNDATION_DLL=1)

FILE(GLOB_RECURSE HEADERS_LIST ${PHYSX_PATH_SHARED}/src/pvd/src/*.h ${PHYSX_PATH_SHARED}/src/pvd/include/*.h)
FILE(GLOB_RECURSE SOURCES_LIST ${PHYSX_PATH_SHARED}/src/pvd/src/*.cpp)

SOURCE_GROUP("Headers" FILES ${HEADERS_LIST})
SOURCE_GROUP("Sources" FILES ${SOURCES_LIST})

ADD_LIBRARY(PxPvdSDK SHARED ${HEADERS_LIST} ${SOURCES_LIST})

TARGET_LINK_LIBRARIES(PxPvdSDK PUBLIC PxFoundation)

IF(CMAKE_GENERATOR MATCHES "Win64")
	TARGET_LINK_LIBRARIES(PxPvdSDK PUBLIC "${PHYSX_PATH_EXTERNALS}/nvToolsExt/1/lib/x64/nvToolsExt64_1.lib")
ELSEIF(CMAKE_GENERATOR MATCHES "Visual Studio")
	TARGET_LINK_LIBRARIES(PxPvdSDK PUBLIC "${PHYSX_PATH_EXTERNALS}/nvToolsExt/1/lib/Win32/nvToolsExt32_1.lib")
ELSE()
	TARGET_LINK_LIBRARIES(PxPvdSDK PUBLIC "${PHYSX_PATH_EXTERNALS}/nvToolsExt/1/lib/armv7/libnvToolsExt.a")
ENDIF()